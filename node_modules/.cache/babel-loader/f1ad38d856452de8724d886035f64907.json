{"remainingRequest":"/Users/apple/BOKE/daike-demo/node_modules/babel-loader/lib/index.js!/Users/apple/BOKE/daike-demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/BOKE/daike-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/BOKE/daike-demo/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/BOKE/daike-demo/src/views/login/index.vue","mtime":1565095060000},{"path":"/Users/apple/BOKE/daike-demo/node_modules/cache-loader/dist/cjs.js","mtime":1561020502000},{"path":"/Users/apple/BOKE/daike-demo/node_modules/babel-loader/lib/index.js","mtime":1561020497000},{"path":"/Users/apple/BOKE/daike-demo/node_modules/cache-loader/dist/cjs.js","mtime":1561020502000},{"path":"/Users/apple/BOKE/daike-demo/node_modules/vue-loader/lib/index.js","mtime":1564662314000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/apple/BOKE/daike-demo/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport store from '@/store/index';\nexport default {\n  name: \"Login\",\n  props: {\n    msg: String\n  },\n  data: function data() {\n    return {\n      user: {\n        account: \"\",\n        password: \"\"\n      },\n      repassword: \"\",\n      isLoginStatus: true\n    };\n  },\n  created: function created() {},\n  methods: {\n    handleRegister: function handleRegister() {\n      this.isLoginStatus = !this.isLoginStatus;\n    },\n    handleLogin: function handleLogin() {\n      var _this = this;\n\n      var url = \"/api/login\";\n\n      if (!this.isLoginStatus) {\n        url = \"/api/register\";\n\n        if (this.user.password !== this.repassword) {\n          this.$toast('密码不一致');\n          return;\n        }\n      }\n\n      this.$http(\"post\", url, _objectSpread({}, this.user), {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      }).then(function (res) {\n        console.log(res);\n        var responese = JSON.parse(res.data);\n\n        if (responese.code == 1) {\n          _this.$toast(responese.msg);\n\n          store.mutations.setUser(responese.data);\n\n          _this.$router.push('./home');\n        } else {\n          _this.$toast(responese.msg);\n        }\n      }).catch(function (err) {\n        console.error(err);\n      });\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,OAAA,KAAA,MAAA,eAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,OAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OADA;AAKA,MAAA,UAAA,EAAA,EALA;AAMA,MAAA,aAAA,EAAA;AANA,KAAA;AAQA,GAdA;AAeA,EAAA,OAfA,qBAeA,CAAA,CAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,WAAA,aAAA,GAAA,CAAA,KAAA,aAAA;AACA,KAHA;AAIA,IAAA,WAJA,yBAIA;AAAA;;AACA,UAAA,GAAA,GAAA,YAAA;;AAEA,UAAA,CAAA,KAAA,aAAA,EAAA;AACA,QAAA,GAAA,GAAA,eAAA;;AACA,YAAA,KAAA,IAAA,CAAA,QAAA,KAAA,KAAA,UAAA,EAAA;AACA,eAAA,MAAA,CAAA,OAAA;AACA;AACA;AACA;;AAEA,WAAA,KAAA,CACA,MADA,EAEA,GAFA,oBAGA,KAAA,IAHA,GAIA;AAAA,wBAAA;AAAA,OAJA,EAMA,IANA,CAMA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,YAAA,SAAA,GAAA,IAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA;;AACA,YAAA,SAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,SAAA,CAAA,GAAA;;AACA,UAAA,KAAA,CAAA,SAAA,CAAA,OAAA,CAAA,SAAA,CAAA,IAAA;;AAEA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,SALA,MAKA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,SAAA,CAAA,GAAA;AACA;AAEA,OAlBA,EAmBA,KAnBA,CAmBA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,GAAA;AACA,OArBA;AAsBA;AArCA;AAhBA,CAAA","sourcesContent":["<template>\n  <div class=\"login\">\n    <van-image width=\"100\" height=\"100\" src=\"https://img.yzcdn.cn/vant/cat.jpeg\" />\n    <van-cell-group class=\"box\">\n      <van-field\n        v-model=\"user.account\"\n        required\n        clearable\n        label=\"用户名\"\n        right-icon=\"question-o\"\n        placeholder=\"请输入用户名\"\n        @click-right-icon=\"$toast('question')\"\n      />\n      <van-field v-model=\"user.password\" type=\"password\" label=\"密码\" placeholder=\"请输入密码\" required />\n      <van-field\n        v-if=\"!isLoginStatus\"\n        v-model=\"repassword\"\n        type=\"password\"\n        label=\"重复密码\"\n        placeholder=\"请再次输入密码\"\n        required\n      />\n    </van-cell-group>\n    <van-row>\n      <van-col span=\"5\" offset=\"6\">\n        <van-button\n          type=\"default\"\n          size=\"small\"\n          @click=\"handleRegister\"\n        >{{ isLoginStatus ? '注册' : '已有账号' }}</van-button>\n      </van-col>\n      <van-col span=\"5\" offset=\"1\">\n        <van-button\n          type=\"primary\"\n          size=\"small\"\n          @click=\"handleLogin\"\n        >{{ isLoginStatus ? '登录' : '注册并登录'}}</van-button>\n      </van-col>\n    </van-row>\n  </div>\n</template>\n\n<script>\nimport store from '@/store/index'\nexport default {\n  name: \"Login\",\n  props: {\n    msg: String\n  },\n  data() {\n    return {\n      user: {\n        account: \"\",\n        password: \"\"\n      },\n      repassword: \"\",\n      isLoginStatus: true\n    };\n  },\n  created() {},\n  methods: {\n    handleRegister() {\n      this.isLoginStatus = !this.isLoginStatus;\n    },\n    handleLogin() {\n      let url = \"/api/login\";\n\n      if (!this.isLoginStatus) {\n        url = \"/api/register\";\n        if ( this.user.password !== this.repassword ){\n            this.$toast('密码不一致')\n            return\n        }\n      }\n\n      this.$http(\n        \"post\",\n        url,\n        { ...this.user },\n        { \"Content-Type\": \"application/x-www-form-urlencoded\" }\n      )\n        .then(res => {\n          console.log(res);\n          const responese = JSON.parse(res.data)\n          if(responese.code == 1){\n            this.$toast(responese.msg)\n            store.mutations.setUser(responese.data)\n            \n            this.$router.push('./home')\n          }else {\n            this.$toast(responese.msg)\n          }\n          \n        })\n        .catch(err => {\n          console.error(err);\n        });\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.box {\n  padding: 0 20px;\n  margin: 20px \n}\n</style>\n"],"sourceRoot":"src/views/login"}]}