{"remainingRequest":"/Users/apple/BOKE/daike-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/BOKE/daike-demo/src/views/login/index.vue?vue&type=style&index=0&id=37dfd6fc&scoped=true&lang=css&","dependencies":[{"path":"/Users/apple/BOKE/daike-demo/src/views/login/index.vue","mtime":1565095060000},{"path":"/Users/apple/BOKE/daike-demo/node_modules/css-loader/index.js","mtime":1561020502000},{"path":"/Users/apple/BOKE/daike-demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1564662314000},{"path":"/Users/apple/BOKE/daike-demo/node_modules/postcss-loader/src/index.js","mtime":1561020502000},{"path":"/Users/apple/BOKE/daike-demo/node_modules/cache-loader/dist/cjs.js","mtime":1561020502000},{"path":"/Users/apple/BOKE/daike-demo/node_modules/vue-loader/lib/index.js","mtime":1564662314000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.box {\n  padding: 0 20px;\n  margin: 20px \n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n  <div class=\"login\">\n    <van-image width=\"100\" height=\"100\" src=\"https://img.yzcdn.cn/vant/cat.jpeg\" />\n    <van-cell-group class=\"box\">\n      <van-field\n        v-model=\"user.account\"\n        required\n        clearable\n        label=\"用户名\"\n        right-icon=\"question-o\"\n        placeholder=\"请输入用户名\"\n        @click-right-icon=\"$toast('question')\"\n      />\n      <van-field v-model=\"user.password\" type=\"password\" label=\"密码\" placeholder=\"请输入密码\" required />\n      <van-field\n        v-if=\"!isLoginStatus\"\n        v-model=\"repassword\"\n        type=\"password\"\n        label=\"重复密码\"\n        placeholder=\"请再次输入密码\"\n        required\n      />\n    </van-cell-group>\n    <van-row>\n      <van-col span=\"5\" offset=\"6\">\n        <van-button\n          type=\"default\"\n          size=\"small\"\n          @click=\"handleRegister\"\n        >{{ isLoginStatus ? '注册' : '已有账号' }}</van-button>\n      </van-col>\n      <van-col span=\"5\" offset=\"1\">\n        <van-button\n          type=\"primary\"\n          size=\"small\"\n          @click=\"handleLogin\"\n        >{{ isLoginStatus ? '登录' : '注册并登录'}}</van-button>\n      </van-col>\n    </van-row>\n  </div>\n</template>\n\n<script>\nimport store from '@/store/index'\nexport default {\n  name: \"Login\",\n  props: {\n    msg: String\n  },\n  data() {\n    return {\n      user: {\n        account: \"\",\n        password: \"\"\n      },\n      repassword: \"\",\n      isLoginStatus: true\n    };\n  },\n  created() {},\n  methods: {\n    handleRegister() {\n      this.isLoginStatus = !this.isLoginStatus;\n    },\n    handleLogin() {\n      let url = \"/api/login\";\n\n      if (!this.isLoginStatus) {\n        url = \"/api/register\";\n        if ( this.user.password !== this.repassword ){\n            this.$toast('密码不一致')\n            return\n        }\n      }\n\n      this.$http(\n        \"post\",\n        url,\n        { ...this.user },\n        { \"Content-Type\": \"application/x-www-form-urlencoded\" }\n      )\n        .then(res => {\n          console.log(res);\n          const responese = JSON.parse(res.data)\n          if(responese.code == 1){\n            this.$toast(responese.msg)\n            store.mutations.setUser(responese.data)\n            \n            this.$router.push('./home')\n          }else {\n            this.$toast(responese.msg)\n          }\n          \n        })\n        .catch(err => {\n          console.error(err);\n        });\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.box {\n  padding: 0 20px;\n  margin: 20px \n}\n</style>\n"]}]}